searchData={"items":[{"type":"module","title":"Mayfly","doc":"Mayfly - AWS Lambda Custom Runtime for Elixir.\n\nThis module serves as the main application entry point for the Elixir Lambda runtime.\nIt starts the supervision tree and initializes the Lambda event loop.","ref":"Mayfly.html"},{"type":"function","title":"Mayfly.hello/0","doc":"Default handler function that can be used for testing.","ref":"Mayfly.html#hello/0"},{"type":"function","title":"Examples - Mayfly.hello/0","doc":"iex> Mayfly.hello()\n    :world","ref":"Mayfly.html#hello/0-examples"},{"type":"function","title":"Mayfly.start/2","doc":"Starts the Mayfly application.\n\nThis function is called automatically by the Elixir runtime when the application starts.\nIt initializes the supervision tree and starts the Lambda event loop.","ref":"Mayfly.html#start/2"},{"type":"module","title":"Mayfly.Error","doc":"Error handling utilities for AWS Lambda functions.\nProvides standardized error formatting and conversion functions.","ref":"Mayfly.Error.html"},{"type":"function","title":"Mayfly.Error.format_error/2","doc":"Converts various error types to a standardized Lambda error format.","ref":"Mayfly.Error.html#format_error/2"},{"type":"function","title":"Mayfly.Error.format_stacktrace/1","doc":"Formats stacktrace into a string representation.\nReturns empty string if stacktrace is nil.","ref":"Mayfly.Error.html#format_stacktrace/1"},{"type":"module","title":"Mayfly.Handler","doc":"Handles the resolution and execution of Lambda function handlers.","ref":"Mayfly.Handler.html"},{"type":"function","title":"Mayfly.Handler.default_handler/1","doc":"Default handler function used when no handler is specified.","ref":"Mayfly.Handler.html#default_handler/1"},{"type":"function","title":"Mayfly.Handler.execute/2","doc":"Executes the handler function with the given payload.\nHandles proper error conversion and response formatting.","ref":"Mayfly.Handler.html#execute/2"},{"type":"function","title":"Mayfly.Handler.resolve/0","doc":"Resolves the handler module and function from environment variables.\nReturns a tuple with {module, function}.","ref":"Mayfly.Handler.html#resolve/0"},{"type":"function","title":"Examples - Mayfly.Handler.resolve/0","doc":"iex> System.put_env(\"_HANDLER\", \"Elixir.MyModule.my_function\")\n    iex> Mayfly.Handler.resolve()\n    {MyModule, :my_function}","ref":"Mayfly.Handler.html#resolve/0-examples"},{"type":"module","title":"Mayfly.Helpers","doc":"Helper functions for AWS Lambda runtime.","ref":"Mayfly.Helpers.html"},{"type":"function","title":"Mayfly.Helpers.get_request_id/1","doc":"Extracts the request ID from Lambda invocation headers.","ref":"Mayfly.Helpers.html#get_request_id/1"},{"type":"module","title":"Mayfly.Loop","doc":"GenServer that handles the AWS Lambda event loop.\nContinuously polls for new invocations and processes them.","ref":"Mayfly.Loop.html"},{"type":"function","title":"Mayfly.Loop.child_spec/1","doc":"Returns a specification to start this module under a supervisor.\n\nSee `Supervisor`.","ref":"Mayfly.Loop.html#child_spec/1"},{"type":"function","title":"Mayfly.Loop.handle_info/2","doc":"Handles the main event loop for processing Lambda invocations.","ref":"Mayfly.Loop.html#handle_info/2"},{"type":"function","title":"Mayfly.Loop.init/1","doc":"Initializes the GenServer and triggers the first loop iteration.","ref":"Mayfly.Loop.html#init/1"},{"type":"function","title":"Mayfly.Loop.start_link/1","doc":"Starts the Lambda event loop GenServer.","ref":"Mayfly.Loop.html#start_link/1"},{"type":"module","title":"Mayfly.Runtime","doc":"Handles communication with the AWS Lambda Runtime API.\nProvides functions for fetching invocations and sending responses.","ref":"Mayfly.Runtime.html"},{"type":"function","title":"Mayfly.Runtime.init_error/1","doc":"Sends an initialization error to the Lambda Runtime API.","ref":"Mayfly.Runtime.html#init_error/1"},{"type":"function","title":"Mayfly.Runtime.invocation_error/2","doc":"Sends an invocation error to the Lambda Runtime API.","ref":"Mayfly.Runtime.html#invocation_error/2"},{"type":"function","title":"Mayfly.Runtime.invocation_response/2","doc":"Sends a successful response for a Lambda invocation.","ref":"Mayfly.Runtime.html#invocation_response/2"},{"type":"function","title":"Mayfly.Runtime.next_invocation/0","doc":"Fetches the next invocation from the Lambda Runtime API.\nReturns {:ok, {protocol, headers, body}} on success or {:error, reason} on failure.","ref":"Mayfly.Runtime.html#next_invocation/0"},{"type":"function","title":"Mayfly.Runtime.service_endpoint/0","doc":"Returns the base service endpoint for the Lambda Runtime API.","ref":"Mayfly.Runtime.html#service_endpoint/0"},{"type":"module","title":"Mayfly.Supervisor","doc":"Supervisor for the Mayfly application.\n\nThis module defines the supervision tree for the Lambda runtime,\nmanaging the lifecycle of the Lambda event loop.","ref":"Mayfly.Supervisor.html"},{"type":"function","title":"Mayfly.Supervisor.child_spec/1","doc":"Returns a specification to start this module under a supervisor.\n\nSee `Supervisor`.","ref":"Mayfly.Supervisor.html#child_spec/1"},{"type":"function","title":"Mayfly.Supervisor.init/1","doc":"Initializes the supervisor with the Lambda event loop as its child.","ref":"Mayfly.Supervisor.html#init/1"},{"type":"function","title":"Mayfly.Supervisor.start_link/0","doc":"Starts the supervisor.","ref":"Mayfly.Supervisor.html#start_link/0"},{"type":"task","title":"mix lambda.build","doc":"A Mix task for building AWS Lambda deployment packages for Elixir applications.\n\nThis task creates a deployment package for AWS Lambda, including:\n- Building a release using `mix release`\n- Creating a bootstrap script\n- Optionally building in a Docker container\n- Optionally creating a ZIP archive for deployment","ref":"Mix.Tasks.Lambda.Build.html"},{"type":"task","title":"Usage - mix lambda.build","doc":"mix lambda.build [options]","ref":"Mix.Tasks.Lambda.Build.html#module-usage"},{"type":"task","title":"Options - mix lambda.build","doc":"--zip, -z      - Create a ZIP file for deployment\n    --outdir, -o   - Specify the output directory (default: current directory)\n    --docker, -d   - Build using Docker (useful for cross-platform compatibility)\n    --help, -h     - Print this help message","ref":"Mix.Tasks.Lambda.Build.html#module-options"},{"type":"task","title":"Examples - mix lambda.build","doc":"# Build a release\n    mix lambda.build\n\n    # Build a release and create a ZIP file\n    mix lambda.build --zip\n\n    # Build using Docker and create a ZIP file\n    mix lambda.build --docker --zip\n\n    # Specify an output directory\n    mix lambda.build --zip --outdir ./deploy","ref":"Mix.Tasks.Lambda.Build.html#module-examples"},{"type":"function","title":"Mix.Tasks.Lambda.Build.bootstrap_content/1","doc":"Generates the content for the bootstrap script.","ref":"Mix.Tasks.Lambda.Build.html#bootstrap_content/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.build_release/0","doc":"Builds the release using mix release.\n\nReturns `:ok` if successful.","ref":"Mix.Tasks.Lambda.Build.html#build_release/0"},{"type":"function","title":"Mix.Tasks.Lambda.Build.create_bootstrap/1","doc":"Creates the bootstrap file.\n\nReturns `{:ok, bootstrap_path}` if successful.","ref":"Mix.Tasks.Lambda.Build.html#create_bootstrap/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.create_zip_archive/2","doc":"Creates a ZIP archive if requested.\n\nReturns `:ok` if successful or if ZIP creation was not requested.","ref":"Mix.Tasks.Lambda.Build.html#create_zip_archive/2"},{"type":"function","title":"Mix.Tasks.Lambda.Build.handle_docker_build/2","doc":"Handles Docker build if requested.\n\nReturns `:ok` if successful or if Docker build was not requested.","ref":"Mix.Tasks.Lambda.Build.html#handle_docker_build/2"},{"type":"function","title":"Mix.Tasks.Lambda.Build.parse_and_validate_args/1","doc":"Parses and validates command line arguments.\n\nReturns `{:ok, opts}` if successful, `{:halt, :help}` if help was requested,\nor `{:error, reason}` if validation fails.","ref":"Mix.Tasks.Lambda.Build.html#parse_and_validate_args/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.print_help/0","doc":"Prints help information.","ref":"Mix.Tasks.Lambda.Build.html#print_help/0"},{"type":"function","title":"Mix.Tasks.Lambda.Build.print_summary/1","doc":"Prints a summary of the build process.","ref":"Mix.Tasks.Lambda.Build.html#print_summary/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.restore_environment/1","doc":"Restores the original environment.\n\nReturns `:ok` if successful.","ref":"Mix.Tasks.Lambda.Build.html#restore_environment/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.run/1","doc":"Runs the Lambda build task.\n\nThis is the main entry point for the mix task, orchestrating the build process.","ref":"Mix.Tasks.Lambda.Build.html#run/1"},{"type":"function","title":"Mix.Tasks.Lambda.Build.run_command/2","doc":"Runs a system command and handles the result.\n\nReturns `{:ok, output}` if successful, or `{:error, reason}` if the command fails.","ref":"Mix.Tasks.Lambda.Build.html#run_command/2"},{"type":"function","title":"Mix.Tasks.Lambda.Build.setup_environment/0","doc":"Sets up the build environment.\n\nSets MIX_ENV to \"lambda\" and returns the original value.","ref":"Mix.Tasks.Lambda.Build.html#setup_environment/0"},{"type":"extras","title":"ðŸª° Mayfly","doc":"# ðŸª° Mayfly\n\n \n   \n   A lightweight AWS Lambda Custom Runtime for Elixir \n  \n  ![Version](https://img.shields.io/badge/version-0.1.0-blue)\n  ![Elixir](https://img.shields.io/badge/elixir-%3E%3D%201.15-blueviolet)\n  ![License](https://img.shields.io/badge/license-MIT-green)","ref":"readme.html"},{"type":"extras","title":"Why Mayfly? - ðŸª° Mayfly","doc":"**Mayfly** lets you leverage the full power of Elixir in AWS Lambda without compromise. Run your Elixir code in a serverless environment with:\n\n- **Zero Boilerplate** - Focus on your business logic, not Lambda implementation details\n- **Native Elixir Experience** - Use the same coding patterns and libraries you love\n- **Optimized Performance** - Designed specifically for Elixir's strengths in AWS Lambda\n- **Proper Error Handling** - Get meaningful stack traces and error reports\n\nUnlike generic custom runtimes, Mayfly is purpose-built for Elixir, bringing the language's reliability and expressiveness to serverless functions.","ref":"readme.html#why-mayfly"},{"type":"extras","title":"Quick Start - ðŸª° Mayfly","doc":"```elixir\n# 1. Add Mayfly to your dependencies\n# In mix.exs\ndef deps do\n  [\n    {:mayfly, github: \"bmalum/mayfly\"}\n  ]\nend\n\n# 2. Create your handler function\ndefmodule MyFunction do\n  def handle(event) do\n    {:ok, %{message: \"Hello from Elixir!\", event: event}}\n  end\nend\n\n# 3. Build and deploy\n# Terminal\n$ mix lambda.build --zip\n# Upload lambda.zip to AWS Lambda and set handler to \"Elixir.MyFunction.handle\"\n```","ref":"readme.html#quick-start"},{"type":"extras","title":"Table of Contents - ðŸª° Mayfly","doc":"- [Features](#features)\n- [Requirements](#requirements)\n- [Installation](#installation)\n- [Usage](#usage)\n- [Documentation](#documentation)\n- [Configuration](#configuration)\n- [Error Handling](#error-handling)\n- [Deployment](#deployment)\n- [Performance](#performance)\n- [Troubleshooting](#troubleshooting)\n- [Roadmap](#roadmap)\n- [Community & Contributing](#community--contributing)\n- [License](#license)","ref":"readme.html#table-of-contents"},{"type":"extras","title":"Features - ðŸª° Mayfly","doc":"- **Full Elixir Support**: Run any Elixir code in AWS Lambda, including GenServers and OTP applications\n- **Simple API**: Clean, idiomatic interface for Lambda functions with minimal boilerplate\n- **Robust Error Handling**: Get meaningful error reports with proper Elixir stacktraces\n- **Build Tooling**: Mix tasks for packaging and deployment with Docker and local build support\n- **Flexible Integration**: Works seamlessly with API Gateway, S3, EventBridge and other AWS services","ref":"readme.html#features"},{"type":"extras","title":"Requirements - ðŸª° Mayfly","doc":"- Elixir ~> 1.15\n- AWS Account with Lambda access\n- Mix","ref":"readme.html#requirements"},{"type":"extras","title":"Installation - ðŸª° Mayfly","doc":"Add Mayfly to your dependencies in `mix.exs`:\n\n```elixir\ndef deps do\n  [\n    {:mayfly, github: \"bmalum/mayfly\"}\n  ]\nend\n```\n\nRun `mix deps.get` to fetch the dependency.","ref":"readme.html#installation"},{"type":"extras","title":"Usage - ðŸª° Mayfly","doc":"","ref":"readme.html#usage"},{"type":"extras","title":"Creating a Lambda Function - ðŸª° Mayfly","doc":"1. **Define your handler function**\n\n   Create a module with a function that accepts a map and returns `{:ok, result}` or `{:error, reason}`:\n\n   ```elixir\n   defmodule MyLambda do\n     def handle(payload) do\n       # Process the payload\n       {:ok, %{message: \"Hello from Elixir!\", received: payload}}\n     end\n   end\n   ```\n\n2. **Build your Lambda package**\n\n   ```bash\n   mix lambda.build --zip\n   ```\n\n3. **Deploy to AWS Lambda**\n   - Create a new Lambda function in the AWS Console\n   - Select \"Custom runtime\" as the runtime\n   - Upload the generated `lambda.zip` file\n   - Set the handler environment variable to `Elixir.MyLambda.handle`","ref":"readme.html#creating-a-lambda-function"},{"type":"extras","title":"Advanced Examples - ðŸª° Mayfly","doc":"#### API Gateway Integration\n\nWhen integrating with API Gateway, structure your response like this:\n\n```elixir\ndefmodule Api.Handler do\n  def process(event) do\n    {:ok, %{\n      statusCode: 200,\n      headers: %{\n        \"Content-Type\" => \"application/json\"\n      },\n      body: Jason.encode!(%{\n        message: \"Hello from Elixir!\",\n        path: event[\"path\"],\n        method: event[\"httpMethod\"]\n      })\n    }}\n  end\nend\n```\n\n#### Error Handling\n\n```elixir\ndefmodule Example.WithError do\n  def handle(%{\"should_fail\" => true}) do\n    {:error, \"Requested failure\"}\n  end\n  \n  def handle(%{\"raise_error\" => true}) do\n    raise \"Demonstrating error handling\"\n  end\n  \n  def handle(payload) do\n    {:ok, %{status: \"success\", payload: payload}}\n  end\nend\n```\n\n#### Handling Binary Data\n\n```elixir\ndefmodule ImageGenerator do\n  def generate(payload) do\n    # Generate image data\n    image_data = create_image(payload)\n    \n    {:ok, %{\n      isBase64Encoded: true,\n      body: Base.encode64(image_data),\n      headers: %{\"Content-Type\" => \"image/png\"}\n    }}\n  end\n  \n  defp create_image(payload) do\n    # Implementation details...\n  end\nend\n```","ref":"readme.html#advanced-examples"},{"type":"extras","title":"Documentation - ðŸª° Mayfly","doc":"","ref":"readme.html#documentation"},{"type":"extras","title":"Online Documentation - ðŸª° Mayfly","doc":"Full documentation with guides and API reference is available at **[elixir-aws-lambda.dev/docs](https://elixir-aws-lambda.dev/docs/)**\n\nQuick links:\n- **[Getting Started Guide](https://elixir-aws-lambda.dev/docs/getting-started.html)** - Step-by-step tutorial for your first Lambda function\n- **[Deployment Guide](https://elixir-aws-lambda.dev/docs/deployment.html)** - Advanced deployment scenarios and best practices\n- **[API Reference](https://elixir-aws-lambda.dev/docs/api-reference.html)** - Complete module and function documentation","ref":"readme.html#online-documentation"},{"type":"extras","title":"Generate Documentation Locally - ðŸª° Mayfly","doc":"Generate and view the documentation on your machine:\n\n```bash\nmix docs\nopen doc/index.html\n```","ref":"readme.html#generate-documentation-locally"},{"type":"extras","title":"Configuration - ðŸª° Mayfly","doc":"","ref":"readme.html#configuration"},{"type":"extras","title":"Environment Variables - ðŸª° Mayfly","doc":"- `_HANDLER`: Required - The Elixir function to call, in the format `Elixir.Module.function`\n- `AWS_LAMBDA_RUNTIME_API`: Automatically set by AWS Lambda\n- `LOGLEVEL`: Optional - Set to `debug` for more verbose logging","ref":"readme.html#environment-variables"},{"type":"extras","title":"Build Options - ðŸª° Mayfly","doc":"The `lambda.build` mix task supports the following options:\n\n- `--zip`: Create a ZIP file for deployment\n- `--outdir`: Specify the output directory (default: current directory)\n- `--docker`: Build using Docker (useful for cross-platform compatibility)\n\nExample:\n```bash\nmix lambda.build --zip --docker\n```","ref":"readme.html#build-options"},{"type":"extras","title":"Custom Docker Build Environment - ðŸª° Mayfly","doc":"You can provide your own `lambda.Dockerfile` in your project root to customize the build environment. This is useful when:\n- Your dependencies require specific system libraries\n- You need a different Erlang/Elixir version\n- You want to add native dependencies for NIFs\n\nCreate a `lambda.Dockerfile` in your project root:\n```dockerfile\nFROM amazonlinux:2023\n\n# Add your custom system dependencies\nRUN yum install -y imagemagick-devel libxml2-devel\n\n# Install Erlang/Elixir (customize versions as needed)\nRUN yum install -y wget tar gcc make && \\\n    wget https://github.com/erlang/otp/releases/download/OTP-27.2/otp_src_27.2.tar.gz && \\\n    tar -zxf otp_src_27.2.tar.gz && \\\n    cd otp_src_27.2 && \\\n    ./configure --without-javac && \\\n    make -j$(nproc) && make install && \\\n    cd / && rm -rf otp_src_27.2*\n\nENV MIX_ENV=lambda\nWORKDIR /mnt/code\nRUN mix local.rebar --force && mix local.hex --force\n```\n\nIf no `lambda.Dockerfile` is found in your project, Mayfly will use the default one from the library.","ref":"readme.html#custom-docker-build-environment"},{"type":"extras","title":"Error Handling - ðŸª° Mayfly","doc":"Mayfly provides standardized error handling for Lambda functions:\n\n1. **Return `{:error, reason}`**: For expected errors\n   ```elixir\n   def handle(payload) do\n     case validate(payload) do\n       :ok -> {:ok, process(payload)}\n       {:error, reason} -> {:error, reason}\n     end\n   end\n   ```\n\n2. **Raise an exception**: For unexpected errors\n   ```elixir\n   def handle(payload) do\n     # This will be caught and formatted properly\n     result = payload[\"a\"] + payload[\"b\"]\n     {:ok, %{sum: result}}\n   end\n   ```\n\nErrors are formatted according to the AWS Lambda error response format with proper stacktraces.","ref":"readme.html#error-handling"},{"type":"extras","title":"Deployment - ðŸª° Mayfly","doc":"","ref":"readme.html#deployment"},{"type":"extras","title":"Detailed Deployment Steps - ðŸª° Mayfly","doc":"1. **Build the Lambda package**:\n   ```bash\n   mix lambda.build --zip\n   ```\n\n2. **Create a new Lambda function**:\n   - Open the AWS Lambda Console\n   - Click \"Create function\"\n   - Choose \"Author from scratch\"\n   - Name your function\n   - Select \"Custom runtime\" for Runtime\n   - Create or select an execution role\n   - Click \"Create function\"\n\n3. **Upload the deployment package**:\n   - In the Function code section, click \"Upload from\"\n   - Select \".zip file\"\n   - Upload the generated `lambda.zip` file\n   - Click \"Save\"\n\n4. **Configure the handler**:\n   - In the Runtime settings section, click \"Edit\"\n   - Set the Handler to `Elixir.YourModule.function_name`\n   - Click \"Save\"\n\n5. **Test your function**:\n   - Click \"Test\"\n   - Configure a test event\n   - Click \"Test\" to invoke your function","ref":"readme.html#detailed-deployment-steps"},{"type":"extras","title":"Performance - ðŸª° Mayfly","doc":"","ref":"readme.html#performance"},{"type":"extras","title":"Optimizing Cold Starts - ðŸª° Mayfly","doc":"- Increase memory allocation (which also increases CPU power)\n- Minimize dependencies in your application\n- Consider provisioned concurrency for critical functions","ref":"readme.html#optimizing-cold-starts"},{"type":"extras","title":"Memory and Timeout Configuration - ðŸª° Mayfly","doc":"- Start with at least 512MB of memory for reasonable performance\n- Adjust timeout based on your function's processing needs\n- Monitor execution times to fine-tune these settings","ref":"readme.html#memory-and-timeout-configuration"},{"type":"extras","title":"Troubleshooting - ðŸª° Mayfly","doc":"","ref":"readme.html#troubleshooting"},{"type":"extras","title":"Common Issues - ðŸª° Mayfly","doc":"1. **Handler Not Found**: Ensure the `_HANDLER` environment variable is correctly set to `Elixir.Module.function`\n2. **Timeout Errors**: Check if your function exceeds the Lambda timeout limit\n3. **Memory Issues**: Increase the Lambda memory allocation if needed\n4. **Cold Start Performance**: Consider increasing the memory allocation to improve cold start times","ref":"readme.html#common-issues"},{"type":"extras","title":"Debugging Tips - ðŸª° Mayfly","doc":"- Set `LOGLEVEL` environment variable to `debug` for verbose logging\n- Review CloudWatch logs for detailed error information\n- Test locally before deployment when possible","ref":"readme.html#debugging-tips"},{"type":"extras","title":"Roadmap - ðŸª° Mayfly","doc":"- [ ] Build with Docker Image for x86/arm64\n- [ ] Build Locally\n- [ ] Create ZIP File\n- [ ] CDK Sample\n- [ ] HexDocs and Hex.pm publishing\n- [ ] GitHub Actions CI/CD templates\n- [ ] Performance benchmarks and optimizations\n- [ ] Framework integrations (Phoenix, etc.)","ref":"readme.html#roadmap"},{"type":"extras","title":"Community & Contributing - ðŸª° Mayfly","doc":"We welcome contributions of all kinds! Here's how you can help:\n\n- **Bug Reports**: Open an issue describing the bug and how to reproduce it\n- **Feature Requests**: Open an issue describing the desired feature\n- **Code Contributions**: Submit a pull request with your changes\n- **Documentation**: Help improve or translate documentation\n- **Examples**: Share how you're using Mayfly in your projects\n\nBefore contributing, please review our:\n- Code of Conduct (link)\n- Contributing Guidelines (link)","ref":"readme.html#community-contributing"},{"type":"extras","title":"License - ðŸª° Mayfly","doc":"Mayfly is licensed under the MIT License. See the LICENSE file for details.","ref":"readme.html#license"},{"type":"extras","title":"Changelog","doc":"# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [0.1.0] - 2025-11-21","ref":"changelog.html"},{"type":"extras","title":"Added - Changelog","doc":"- Initial release of Mayfly - AWS Lambda Custom Runtime for Elixir\n- Core Lambda Runtime API integration with long-polling support\n- Handler resolution and execution with proper error handling\n- Comprehensive error formatting with stacktraces\n- Mix task `lambda.build` for creating deployment packages\n- Docker build support for cross-platform compatibility\n- ZIP archive creation for Lambda deployment\n- Bootstrap script generation\n- Security: Using `String.to_existing_atom/1` to prevent atom exhaustion\n- Timeout configuration: 5s for responses, infinite for long-polling\n- Graceful error handling for missing request IDs and malformed JSON\n- OTP supervision tree for fault tolerance\n- Comprehensive documentation and README with examples","ref":"changelog.html#added"},{"type":"extras","title":"Features - Changelog","doc":"- Zero boilerplate Lambda function development\n- Native Elixir experience with standard `{:ok, result}` / `{:error, reason}` patterns\n- Support for API Gateway, S3, EventBridge and other AWS event sources\n- Proper Elixir stacktraces in Lambda error responses\n- Flexible handler configuration via `_HANDLER` environment variable\n- Build tooling with `--zip`, `--docker`, and `--outdir` options","ref":"changelog.html#features"},{"type":"extras","title":"Technical Details - Changelog","doc":"- Elixir ~> 1.15 support\n- Single dependency: Jason for JSON encoding/decoding\n- Uses Erlang's `:httpc` for Lambda Runtime API communication\n- GenServer-based event loop for continuous invocation processing","ref":"changelog.html#technical-details"},{"type":"extras","title":"Getting Started with Mayfly","doc":"# Getting Started with Mayfly\n\nThis guide will walk you through creating your first Elixir Lambda function using Mayfly.","ref":"getting-started.html"},{"type":"extras","title":"Prerequisites - Getting Started with Mayfly","doc":"- Elixir ~> 1.15 installed\n- Mix build tool\n- AWS Account with Lambda access\n- AWS CLI configured (optional, for deployment)","ref":"getting-started.html#prerequisites"},{"type":"extras","title":"Installation - Getting Started with Mayfly","doc":"Add Mayfly to your project's dependencies in `mix.exs`:\n\n```elixir\ndef deps do\n  [\n    {:mayfly, github: \"bmalum/mayfly\"}\n  ]\nend\n```\n\nThen fetch the dependencies:\n\n```bash\nmix deps.get\n```","ref":"getting-started.html#installation"},{"type":"extras","title":"Creating Your First Lambda Function - Getting Started with Mayfly","doc":"","ref":"getting-started.html#creating-your-first-lambda-function"},{"type":"extras","title":"1. Define Your Handler - Getting Started with Mayfly","doc":"Create a new module with a handler function. The handler receives a map (the Lambda event) and returns `{:ok, result}` or `{:error, reason}`:\n\n```elixir\ndefmodule MyApp.HelloHandler do\n  @moduledoc \"\"\"\n  A simple Lambda function that greets the world.\n  \"\"\"\n\n  def handle(event) do\n    name = Map.get(event, \"name\", \"World\")\n    \n    {:ok, %{\n      message: \"Hello, #{name}!\",\n      timestamp: DateTime.utc_now() |> DateTime.to_iso8601()\n    }}\n  end\nend\n```","ref":"getting-started.html#1-define-your-handler"},{"type":"extras","title":"2. Build Your Lambda Package - Getting Started with Mayfly","doc":"Use the provided Mix task to build a deployment package:\n\n```bash\nmix lambda.build --zip\n```\n\nThis will:\n- Build a release in the `lambda` environment\n- Generate a `bootstrap` script\n- Create a `lambda.zip` file ready for deployment","ref":"getting-started.html#2-build-your-lambda-package"},{"type":"extras","title":"3. Deploy to AWS Lambda - Getting Started with Mayfly","doc":"#### Using AWS Console\n\n1. Go to the [AWS Lambda Console](https://console.aws.amazon.com/lambda)\n2. Click \"Create function\"\n3. Choose \"Author from scratch\"\n4. Configure:\n   - **Function name**: `my-elixir-function`\n   - **Runtime**: Custom runtime on Amazon Linux 2023\n   - **Architecture**: x86_64 (or arm64 if you built with Docker)\n5. Click \"Create function\"\n6. In the \"Code\" section, click \"Upload from\" â†’ \".zip file\"\n7. Upload your `lambda.zip` file\n8. In \"Runtime settings\", click \"Edit\" and set:\n   - **Handler**: `Elixir.MyApp.HelloHandler.handle`\n9. Click \"Save\"\n\n#### Using AWS CLI\n\n```bash\n# Create the function\naws lambda create-function \\\n  --function-name my-elixir-function \\\n  --runtime provided.al2023 \\\n  --role arn:aws:iam::YOUR_ACCOUNT_ID:role/lambda-execution-role \\\n  --handler Elixir.MyApp.HelloHandler.handle \\\n  --zip-file fileb://lambda.zip \\\n  --timeout 30 \\\n  --memory-size 512\n\n# Update existing function\naws lambda update-function-code \\\n  --function-name my-elixir-function \\\n  --zip-file fileb://lambda.zip\n```","ref":"getting-started.html#3-deploy-to-aws-lambda"},{"type":"extras","title":"4. Test Your Function - Getting Started with Mayfly","doc":"In the AWS Lambda Console:\n\n1. Click the \"Test\" tab\n2. Create a new test event:\n```json\n{\n  \"name\": \"Elixir Developer\"\n}\n```\n3. Click \"Test\"\n\nYou should see a response like:\n```json\n{\n  \"message\": \"Hello, Elixir Developer!\",\n  \"timestamp\": \"2025-11-21T10:30:00Z\"\n}\n```","ref":"getting-started.html#4-test-your-function"},{"type":"extras","title":"Handler Patterns - Getting Started with Mayfly","doc":"","ref":"getting-started.html#handler-patterns"},{"type":"extras","title":"Basic Handler - Getting Started with Mayfly","doc":"```elixir\ndef handle(event) do\n  {:ok, %{result: \"success\"}}\nend\n```","ref":"getting-started.html#basic-handler"},{"type":"extras","title":"With Error Handling - Getting Started with Mayfly","doc":"```elixir\ndef handle(event) do\n  case validate(event) do\n    :ok -> \n      result = process(event)\n      {:ok, result}\n    \n    {:error, reason} -> \n      {:error, reason}\n  end\nend\n```","ref":"getting-started.html#with-error-handling"},{"type":"extras","title":"With Pattern Matching - Getting Started with Mayfly","doc":"```elixir\ndef handle(%{\"action\" => \"create\"} = event) do\n  # Handle create action\n  {:ok, %{status: \"created\"}}\nend\n\ndef handle(%{\"action\" => \"delete\"} = event) do\n  # Handle delete action\n  {:ok, %{status: \"deleted\"}}\nend\n\ndef handle(_event) do\n  {:error, \"Unknown action\"}\nend\n```","ref":"getting-started.html#with-pattern-matching"},{"type":"extras","title":"Environment Variables - Getting Started with Mayfly","doc":"Configure your handler using the `_HANDLER` environment variable in Lambda:\n\n```\n_HANDLER=Elixir.MyApp.HelloHandler.handle\n```\n\nThe format is: `Elixir.ModuleName.function_name`","ref":"getting-started.html#environment-variables"},{"type":"extras","title":"Next Steps - Getting Started with Mayfly","doc":"- Learn about [Deployment Strategies](deployment.html)\n- Explore [API Gateway Integration](deployment.html#api-gateway-integration)\n- See [Error Handling Best Practices](deployment.html#error-handling)","ref":"getting-started.html#next-steps"},{"type":"extras","title":"Deployment Guide","doc":"# Deployment Guide\n\nThis guide covers advanced deployment scenarios and best practices for Mayfly Lambda functions.","ref":"deployment.html"},{"type":"extras","title":"Build Options - Deployment Guide","doc":"","ref":"deployment.html#build-options"},{"type":"extras","title":"Local Build - Deployment Guide","doc":"Build on your local machine (same architecture as Lambda):\n\n```bash\nmix lambda.build --zip\n```","ref":"deployment.html#local-build"},{"type":"extras","title":"Docker Build - Deployment Guide","doc":"Build using Docker for cross-platform compatibility:\n\n```bash\nmix lambda.build --docker --zip\n```\n\nThis ensures your build matches the Lambda execution environment exactly.","ref":"deployment.html#docker-build"},{"type":"extras","title":"Custom Output Directory - Deployment Guide","doc":"Specify where to save the build artifacts:\n\n```bash\nmix lambda.build --zip --outdir ./deploy\n```","ref":"deployment.html#custom-output-directory"},{"type":"extras","title":"API Gateway Integration - Deployment Guide","doc":"When integrating with API Gateway, structure your responses according to the proxy integration format:\n\n```elixir\ndefmodule MyApp.ApiHandler do\n  def handle(event) do\n    # Extract request details\n    path = event[\"path\"]\n    method = event[\"httpMethod\"]\n    body = event[\"body\"]\n    \n    # Process request\n    response_body = process_request(method, path, body)\n    \n    # Return API Gateway proxy response\n    {:ok, %{\n      statusCode: 200,\n      headers: %{\n        \"Content-Type\" => \"application/json\",\n        \"Access-Control-Allow-Origin\" => \"*\"\n      },\n      body: Jason.encode!(response_body)\n    }}\n  end\n  \n  defp process_request(\"GET\", \"/users\", _body) do\n    %{users: [\"Alice\", \"Bob\"]}\n  end\n  \n  defp process_request(\"POST\", \"/users\", body) do\n    user = Jason.decode!(body)\n    %{created: user}\n  end\n  \n  defp process_request(_method, _path, _body) do\n    %{error: \"Not found\"}\n  end\nend\n```","ref":"deployment.html#api-gateway-integration"},{"type":"extras","title":"Handling Different HTTP Methods - Deployment Guide","doc":"```elixir\ndef handle(%{\"httpMethod\" => \"GET\"} = event) do\n  handle_get(event)\nend\n\ndef handle(%{\"httpMethod\" => \"POST\"} = event) do\n  handle_post(event)\nend\n\ndef handle(%{\"httpMethod\" => \"PUT\"} = event) do\n  handle_put(event)\nend\n\ndef handle(%{\"httpMethod\" => \"DELETE\"} = event) do\n  handle_delete(event)\nend\n```","ref":"deployment.html#handling-different-http-methods"},{"type":"extras","title":"Error Handling - Deployment Guide","doc":"","ref":"deployment.html#error-handling"},{"type":"extras","title":"Returning Errors - Deployment Guide","doc":"Return errors using the standard tuple format:\n\n```elixir\ndef handle(event) do\n  case validate_input(event) do\n    :ok -> \n      {:ok, process(event)}\n    \n    {:error, message} -> \n      {:error, message}\n  end\nend\n```\n\nMayfly will automatically format errors according to Lambda's error response format:\n\n```json\n{\n  \"errorType\": \"RuntimeError\",\n  \"errorMessage\": \"Invalid input\",\n  \"stackTrace\": \"...\"\n}\n```","ref":"deployment.html#returning-errors"},{"type":"extras","title":"Raising Exceptions - Deployment Guide","doc":"You can also raise exceptions, which Mayfly will catch and format:\n\n```elixir\ndef handle(event) do\n  unless Map.has_key?(event, \"required_field\") do\n    raise \"Missing required field\"\n  end\n  \n  {:ok, process(event)}\nend\n```","ref":"deployment.html#raising-exceptions"},{"type":"extras","title":"Custom Error Types - Deployment Guide","doc":"Define custom error structs for better error handling:\n\n```elixir\ndefmodule MyApp.ValidationError do\n  defexception [:message, :field]\nend\n\ndef handle(event) do\n  case validate(event) do\n    :ok -> \n      {:ok, process(event)}\n    \n    {:error, field} -> \n      raise MyApp.ValidationError, \n        message: \"Validation failed\", \n        field: field\n  end\nend\n```","ref":"deployment.html#custom-error-types"},{"type":"extras","title":"Event Sources - Deployment Guide","doc":"","ref":"deployment.html#event-sources"},{"type":"extras","title":"S3 Events - Deployment Guide","doc":"```elixir\ndefmodule MyApp.S3Handler do\n  def handle(%{\"Records\" => records}) do\n    results = Enum.map(records, fn record ->\n      bucket = get_in(record, [\"s3\", \"bucket\", \"name\"])\n      key = get_in(record, [\"s3\", \"object\", \"key\"])\n      \n      process_s3_object(bucket, key)\n    end)\n    \n    {:ok, %{processed: length(results)}}\n  end\nend\n```","ref":"deployment.html#s3-events"},{"type":"extras","title":"EventBridge Events - Deployment Guide","doc":"```elixir\ndefmodule MyApp.EventBridgeHandler do\n  def handle(%{\"detail-type\" => detail_type, \"detail\" => detail}) do\n    case detail_type do\n      \"Order Placed\" -> \n        process_order(detail)\n      \n      \"User Registered\" -> \n        process_registration(detail)\n      \n      _ -> \n        {:ok, %{status: \"ignored\"}}\n    end\n  end\nend\n```","ref":"deployment.html#eventbridge-events"},{"type":"extras","title":"SQS Events - Deployment Guide","doc":"```elixir\ndefmodule MyApp.SqsHandler do\n  def handle(%{\"Records\" => records}) do\n    results = Enum.map(records, fn record ->\n      body = record[\"body\"] |> Jason.decode!()\n      process_message(body)\n    end)\n    \n    {:ok, %{\n      batchItemFailures: []  # Return failed message IDs for retry\n    }}\n  end\nend\n```","ref":"deployment.html#sqs-events"},{"type":"extras","title":"Performance Optimization - Deployment Guide","doc":"","ref":"deployment.html#performance-optimization"},{"type":"extras","title":"Memory Configuration - Deployment Guide","doc":"Start with 512MB and adjust based on your function's needs:\n\n```bash\naws lambda update-function-configuration \\\n  --function-name my-function \\\n  --memory-size 1024\n```\n\nMore memory also means more CPU power.","ref":"deployment.html#memory-configuration"},{"type":"extras","title":"Timeout Configuration - Deployment Guide","doc":"Set appropriate timeouts (default is 3 seconds):\n\n```bash\naws lambda update-function-configuration \\\n  --function-name my-function \\\n  --timeout 30\n```","ref":"deployment.html#timeout-configuration"},{"type":"extras","title":"Cold Start Optimization - Deployment Guide","doc":"- Keep dependencies minimal\n- Use provisioned concurrency for critical functions\n- Consider Lambda SnapStart (when available for custom runtimes)","ref":"deployment.html#cold-start-optimization"},{"type":"extras","title":"Environment Variables - Deployment Guide","doc":"Set environment variables for configuration:\n\n```bash\naws lambda update-function-configuration \\\n  --function-name my-function \\\n  --environment Variables=\"{\n    _HANDLER=Elixir.MyApp.Handler.handle,\n    DATABASE_URL=postgres://...,\n    API_KEY=secret123\n  }\"\n```\n\nAccess in your code:\n\n```elixir\ndef handle(event) do\n  db_url = System.get_env(\"DATABASE_URL\")\n  api_key = System.get_env(\"API_KEY\")\n  \n  # Use configuration\n  {:ok, process(event, db_url, api_key)}\nend\n```","ref":"deployment.html#environment-variables"},{"type":"extras","title":"Monitoring and Logging - Deployment Guide","doc":"","ref":"deployment.html#monitoring-and-logging"},{"type":"extras","title":"Structured Logging - Deployment Guide","doc":"Use Logger for structured logging:\n\n```elixir\nrequire Logger\n\ndef handle(event) do\n  Logger.info(\"Processing event\", event_type: event[\"type\"])\n  \n  result = process(event)\n  \n  Logger.info(\"Event processed successfully\", \n    event_type: event[\"type\"],\n    duration_ms: 123\n  )\n  \n  {:ok, result}\nend\n```\n\nLogs appear in CloudWatch Logs automatically.","ref":"deployment.html#structured-logging"},{"type":"extras","title":"Metrics - Deployment Guide","doc":"Track custom metrics using CloudWatch:\n\n```elixir\ndef handle(event) do\n  start_time = System.monotonic_time(:millisecond)\n  \n  result = process(event)\n  \n  duration = System.monotonic_time(:millisecond) - start_time\n  Logger.info(\"MONITORING|#{duration}|milliseconds|ProcessingTime\")\n  \n  {:ok, result}\nend\n```","ref":"deployment.html#metrics"},{"type":"extras","title":"CI/CD Integration - Deployment Guide","doc":"","ref":"deployment.html#ci-cd-integration"},{"type":"extras","title":"GitHub Actions Example - Deployment Guide","doc":"```yaml\nname: Deploy Lambda\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      \n      - uses: erlef/setup-beam@v1\n        with:\n          elixir-version: '1.15'\n          otp-version: '26'\n      \n      - name: Install dependencies\n        run: mix deps.get\n      \n      - name: Build Lambda package\n        run: mix lambda.build --docker --zip\n      \n      - name: Deploy to AWS\n        env:\n          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}\n          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n        run: |\n          aws lambda update-function-code \\\n            --function-name my-function \\\n            --zip-file fileb://lambda.zip\n```","ref":"deployment.html#github-actions-example"},{"type":"extras","title":"Best Practices - Deployment Guide","doc":"1. **Keep handlers simple** - Move business logic to separate modules\n2. **Use pattern matching** - Handle different event types cleanly\n3. **Return early** - Validate input and return errors quickly\n4. **Log appropriately** - Use structured logging for better observability\n5. **Test locally** - Write unit tests for your handler logic\n6. **Monitor performance** - Track cold starts and execution times\n7. **Handle errors gracefully** - Always return proper error responses\n8. **Use environment variables** - Keep configuration out of code\n9. **Version your functions** - Use Lambda versions and aliases\n10. **Set appropriate timeouts** - Don't use default 3s for long-running tasks","ref":"deployment.html#best-practices"}],"proglang":"elixir","content_type":"text/markdown","producer":{"name":"ex_doc","version":"0.39.1"}}