!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tracker=e():t.Tracker=e()}(this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>r});var n=function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function c(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})};var i=function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function c(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((i=i.apply(t,e||[])).next())})};const r=class{constructor(t){if(this.fingerprint=null,this.initialized=!1,!t||!t.apiUrl)throw new Error("API URL is required");this.apiUrl=t.apiUrl,this.lastUrl=window.location.href,this.init()}init(){return i(this,void 0,void 0,function*(){try{this.fingerprint=yield function(){return n(this,void 0,void 0,function*(){const t=[navigator.userAgent,navigator.language,screen.colorDepth,screen.width,screen.height,(new Date).getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,navigator.hardwareConcurrency||0,navigator.platform];try{const e=document.createElement("canvas"),n=e.getContext("2d");n&&(n.textBaseline="top",n.font="14px Arial",n.fillText("fingerprint",2,2),t.push(e.toDataURL()))}catch(t){}return function(t){return n(this,void 0,void 0,function*(){const e=(new TextEncoder).encode(t),n=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join("")})}(t.join("|"))})}(),this.initialized=!0,this.track("pageview"),this.setupUrlChangeListeners()}catch(t){console.error("Tracker initialization failed:",t)}})}setupUrlChangeListeners(){window.addEventListener("popstate",()=>{this.checkUrlChange()});const t=history.pushState;history.pushState=function(e,n,i){t.call(history,e,n,i),window.dispatchEvent(new Event("pushstate"))},window.addEventListener("pushstate",()=>{this.checkUrlChange()});const e=history.replaceState;history.replaceState=function(t,n,i){e.call(history,t,n,i),window.dispatchEvent(new Event("replacestate"))},window.addEventListener("replacestate",()=>{this.checkUrlChange()})}checkUrlChange(){const t=window.location.href;t!==this.lastUrl&&(this.lastUrl=t,this.track("pageview"))}track(t){return i(this,arguments,void 0,function*(t,e={}){if(!this.initialized||!this.fingerprint)return void console.warn("Tracker not initialized yet");const n=Object.assign({fingerprint:this.fingerprint,eventType:t,url:window.location.href,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,referrer:document.referrer,screenResolution:`${window.screen.width}x${window.screen.height}`},e);try{yield fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})}catch(t){console.error("Failed to send tracking data:",t)}})}};return e.default})());